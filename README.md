자유인 지니가 만든 주식스팸 거르기.

1. gpt-4가 스팸인 문자 몇 개와 아닌 문자 몇 개를 예시로 받아서 이걸 구분할 스팸인지 아닌지 말할 수 있는 정규표현식 함수를 짜내도록 한다.
2. 샘플데이터를 셔플하고 고르게 샘플하여 위의 작업을 반복하면 데이터 갯수에 따라 여러 개의 스팸 판별함수가 나온다.
3. 이 함수들이 각각 특정 문자를 보고 스팸인지 아닌지 투표하도록 한다.
4. 각각 함수를 분류 트리라고 생각하면 이게 바로 랜덤포레스트가 아닐까?
5. 샘플데이터 기준으로 꽤 잘됨. 300여건의 스팸문자와 일상문자 기준으로 만들었음. 오른쪽이 ROC커브 [wandb](https://wandb.ai/sonsus/scamtext/runs/f4w58kcd?workspace=user-sonsus)

|      | TP | FP |
|------|-------------|------------|
| test<br/>(100 examples)   | 94.4%       | 2.82%      |     
| train<br/>(300 examples)   | 90.9%       | 11%        |

TP = true positive (스팸인데 스팸으로 분류함)

- 본 데이터에 노이즈가 섞여있으나, 어차피 데이터가 많아질 수록 이걸 정제하는 로직자체가 새로운 일이라 그대로 진행하였다. 실제 False positive (FP) 는 더 낮다.  
   - (wandb dashboard 를 보면 false positive로 나온 예시들에 사실은 true positive로 갔어야할, 스팸인데 스팸이 아니라고 라벨된 데이터들도 껴있다.)
- 트레이닝 셋을 네 번 사용하고 각각의 트리를 뽑을 때 15개의 문자쌍을 보도록 한 경우 위의 성능을 기록하였다. 자세한 실험 내용은 나중에 적을텐데 급하면 <code>todo.md</code>를 보면 뭔 소린지 알 수 있을지도? 아니면 이슈든 메일이든 물어보십쇼.
- 데이터에 인증번호에 대한 건 없지만 예시로 몇 개 해봤을 때 인증번호 문자들은 스팸이라고 거르진 않더라.
- 데이터에 개인정보는 안들어있는 것 같긴한데 제공자들에게 공개 동의를 얻지 않았으므로 공개하지 않습니다. 출처도 밝히지 않겠지만 제공자들이 이 엔진의 제작을 위해 제공해주셨습니다.




- [x] 코틀린 코드가 유효한지 확인: 파이썬을 그대로 하나씩 포팅한거라 실행은 불가능
- [ ] gradio 데모 올리기

<code>wrapped/</code>: 함수형태로 묶음. <code>pip install python==3.11 pandas fire</code> 후 테스트해볼 수 있음, 실행 결과는 다음과 같음
```bash
$cd wrapped 
$python 4_1_packaged_run_tandem.py

# 아래는 아웃풋
input_txts:          ["[Web발신]\n[프리미엄콘텐츠] 미국주식 사관학교 1개월 이용권 3,900원이 결제되었습니다.", "[Web발신]\nYour Beam verification code is: 5557", "[국외발신]\nG-592238 is your Google verification code.", "[Web발신]\n[아프리카TV] 인증번호 [11382]를 입력해 주세요.", "[Web발신]\n[민방위 교육센터]\n본인확인을 위해 인증번호 [514073]를 입력해 주세요.", "[Web발신]\n[한전사이버지점]고객님의 한전정보 SMS 인증번호는[290017]입니다.", "[Web발신]\n[삼성카드]SMS 인증번호[471636]", "[한국모바일인증(주)]본인확인 인증번호[995988]입니다. \\타인 노출 금지\\\"\"", "[Web발신]\n[MY COMPANY] 승인\n3101 선선일님\n134,000원 일시불\n신세계센트럴시티\n잔여한도1,866,000원", "[Web발신]\n[MY COMPANY] 현대카드 당월 결제 예정 금액 안내\n\n회원님, 당월 법인카드 결제 예정 결제금액을 안내 해드립니다\n\n[상세 안내]\n- 대상카드 : 3101 카드\n- 결제 예정 금액 : 49,700원 (05/07 기준)\n- 결제일 : 05/24\n- 납부방식 : 농협중앙\n\n. 상세내역은 청구서 또는 현대카드 법인홈페이지에서 확인이 가능합니다.\n\n[문의] 1577-6000", "[국외발신]\n선선일님\n[수입세금]\n발생되였습니다.\n금액892,624원\n사건코드(3**4)\n금일 자동처리예정\n민원0269569423", "https://www.youtube.com/live/garRuI-ex6w?feature=share\n주일낮예배입니다", "[Web발신]\n(광고)크린토피아 내일까지! 패딩,점퍼,스웨터,코트,겨울조끼 세탁15%세일! 무료거부0807450061", "[여신금융협회] 본인확인 인증번호[506382]를 화면에 입력해주세요", "[CJ대한통운]고객님의 상품(568830418273)이 배송되었습니다.▶인수자(위탁):문앞"]
voted_spam_fraction: [0.2916666666666667, 0.2222222222222222, 0.25, 0.20833333333333334, 0.2777777777777778, 0.2777777777777778, 0.2222222222222222, 0.3194444444444444, 0.3472222222222222, 0.4444444444444444, 0.4583333333333333, 0.05555555555555555, 0.75, 0.2361111111111111, 0.3194444444444444]
decisions:           [False, False, False, False, False, False, False, False, False, True, True, False, True, False, False]
num_functions:       72
```
